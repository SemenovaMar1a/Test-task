# Test-task

# Консольное приложение для управления библиотекой книг

Это консольное приложение предназначено для работы с библиотекой книг. Оно позволяет добавлять, удалять книги, а также выполнять поиск, показывать каталог книг, изменять статус книги. Данные о книгах хранятся в JSON файле, что позволяет легко сохранять и обновлять информацию.

## Функции программы

В приложении доступны следующие функции:

### 1. `save_json(data: Dict) -> None`
- **Описание:** Эта функция сохраняет данные в JSON файл.
- **Аргументы:**
  - `data (Dict)` — Словарь, который нужно сохранить в JSON файл.
- **Возвращаемое значение:** Функция ничего не возвращает.
- **Процесс:** Открывает файл `library.json` для записи в кодировке UTF-8 и сохраняет данные в формате JSON, с отступами для удобства чтения и с поддержкой символов Unicode.

### 2. `load_json_or_create() -> Dict`
- **Описание:** Загружает данные из JSON файла, если файл существует. Если файл не найден или поврежден, создаёт новый файл с данными по умолчанию и возвращает его содержимое.
- **Аргументы:** Нет.
- **Возвращаемое значение:** Возвращает словарь с данными книги. Если файл не найден или поврежден, создаёт новый с дефолтной структурой.
- **Процесс:** 
  - Попытка загрузить данные из файла `library.json`.
  - Если файл не существует или невалиден, создается новый файл с дефолтной структурой.
 
### 3. `add_book(book_title: str, author_name: str, publication_year: int) -> None`
- **Описание:** Добавляет новую книгу в каталог.
- **Аргументы:**
  - `book_title (str)` — Название книги.
  - `author_name (str)` — Автор книги.
  - `publication_year (int)` — Год издания книги.
- **Возвращаемое значение:** Функция ничего не возвращает.
- **Процесс:**
  - Создаёт новый словарь с информацией о книге (название, автор, год, статус).
  - Генерирует уникальный ID для новой книги.
  - Добавляет книгу в каталог в JSON файл.

![Рисунок 1 Добавление](https://github.com/user-attachments/assets/14cae126-e1eb-4500-baa0-3955322a35a4)

![Рисунок 2 Добавление](https://github.com/user-attachments/assets/3f4ad37d-5a03-4f86-935a-1f65c2482694)

### 4. `remove_book(id_to_delete: str) -> bool`
- **Описание:** Удаляет книгу из каталога по её ID.
- **Аргументы:**
  - `id_to_delete (str)` — ID книги, которую нужно удалить.
- **Возвращаемое значение:** 
  - `True` — если книга была удалена.
  - `False` — если книги с указанным ID нет в каталоге.
- **Процесс:**
  - Проверяет наличие книги с данным ID в каталоге.
  - Если книга найдена, удаляет её и сохраняет изменения в файл.

![Рисунок 3 Удаление](https://github.com/user-attachments/assets/a5d392cb-056a-4ab7-8482-ba39d6b5417f)

![Рисунок 4 Удаление](https://github.com/user-attachments/assets/3597b394-8740-4d5b-930e-2a5e87840334)


### 5. `search_book(search_key: str) -> List[Tuple[str, Dict]]`
- **Описание:** Ищет книги по параметрам (название, автор или год издания).
- **Аргументы:**
  - `search_key (str)` — Ключ для поиска, который может быть названием книги, автором или годом издания.
- **Возвращаемое значение:** 
  - Список кортежей, где каждый кортеж состоит из ID книги и словаря с данными о книге.
- **Процесс:**
  - Ищет книги в каталоге по ключевому слову (`search_key`).
  - Если ключ совпадает с названием, автором или годом издания книги, добавляет её в список найденных книг.

![Рисунок 5 Поиск](https://github.com/user-attachments/assets/c9b844e9-f817-41c4-a473-054afb960734)

![Рисунок 6 Поиск](https://github.com/user-attachments/assets/4a9f7723-731e-461a-86c4-d763630c853d)

![Рисунок 7 Поиск](https://github.com/user-attachments/assets/45940a8c-e477-4b73-b7ac-d5e94cdf2ecf)

![Рисунок 8 Поиск](https://github.com/user-attachments/assets/ca02b7f0-59d9-400e-b33a-9d7d1df5c6b9)

### 6. `change_status(book_id: str, new_status: str) -> bool`
- **Описание:** Меняет статус книги по её ID (например, "в наличии" или "выдана").
- **Аргументы:**
  - `book_id (str)` — ID книги, для которой нужно изменить статус.
  - `new_status (str)` — Новый статус книги (например, "в наличии" или "выдана").
- **Возвращаемое значение:** 
  - `True` — если статус был успешно изменён.
  - `False` — если книги с данным ID не существует.
- **Процесс:**
  - Ищет книгу с данным ID в каталоге и изменяет её статус.
  - Сохраняет изменения в JSON файл.

![Рисунок 9 Замена статуса](https://github.com/user-attachments/assets/cfc1620b-d586-4498-bf82-3117f8b31c5e)
 
![Рисунок 10 Замена статуса](https://github.com/user-attachments/assets/9f469d1d-1ac8-4a95-994c-e90681ef093c)

![Рисунок 11 Замена статуса](https://github.com/user-attachments/assets/96dc1532-3c6b-47ea-9940-7025839ec42f)

## Основной цикл программы

Программа работает в цикле, предлагая пользователю выбрать одно из действий:

1. **Добавить книгу:** Запрашивает название, автора и год издания для добавления новой книги в каталог.
2. **Удалить книгу:** Запрашивает ID книги для её удаления.
3. **Поиск книги:** Запрашивает ключевое слово для поиска книги по названию, автору или году издания.
4. **Показать каталог книг:** Выводит список всех книг в каталоге.
5. **Сменить статус:** Запрашивает ID книги и новый статус для её изменения.
6. **Выйти:** Закрывает программу.

В случае некорректного ввода пользователю будет предложено повторить выбор.

![Навигация](https://github.com/user-attachments/assets/8dd65546-abb5-45ca-afec-1f1ba3d14618)


## Структура данных

Все данные о книгах хранятся в JSON файле, что позволяет программе быть простым и удобным для работы с файлами. Пример структуры данных:

```json
{
    "catalog": {
        "1": {
            "title": "Название книги",
            "author": "Автор книги",
            "year": 2020,
            "status": "В наличии"
        },
        "2": {
            "title": "Другая книга",
            "author": "Другой автор",
            "year": 2015,
            "status": "Выдана"
        },
    }
}
